---
title: Node.jsã§ã®CLIã®ä½œã‚Šæ–¹ã¨ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ã¨ã‚
tags: Node.js CLI command
author: toshi-toma
slide: false
---
# ã¯ã˜ã‚ã«

Node.jsã§`CLI(Command Line Interface)`ã‚’ä½œã‚ŠãŸããªã‚‹ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ãã—ã¦ã€GitHubã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹CLIã‚’è¦‹ã‚‹ã¨ã€è‰²ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’çµ„ã¿çµ„ã¿åˆã‚ã›ã¦ä¾¿åˆ©ãªCLIã‚’ä½œã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€[Node.jsã§CLIã‚’ã©ã†ä½œã‚‹ã®ã‹ï¼Ÿ](#nodejsã§ã®cliã®ä½œã‚Šæ–¹)ãã—ã¦ã€[CLIé–‹ç™ºã‚’æ”¯ãˆã‚‹ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª](#ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª)ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

# èº«ã®å›ã‚Šã®CLI

CLIã®ä½œã‚Šæ–¹ã‚’è¦‹ã‚‹å‰ã«ã€æ™®æ®µã®é–‹ç™ºã§è§¦ã‚Œã¦ã„ã‚‹CLIã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

## ESLint

CLIã«ã¯åŸºæœ¬çš„ã«`--help`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã­ã€‚
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-12-12 16.46.27.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/888e2ee4-f925-118f-be80-16a833286f82.png)

## npm

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’å—ã‘å–ã‚‹å¯¾è©±çš„ãªCLIã‚‚å¤šã„ã§ã™ã­ã€‚
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-12-12 16.45.29.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/15c3db3d-5a2c-c2a4-157f-a78e8b0180a5.png)


## expo

ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒã‚ã‚‹ã“ã¨ã§å…¥åŠ›ã™ã‚‹å†…å®¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¼ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-12-10 17.45.24.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/2dfca736-2f0b-8129-cd69-694ecf627b81.png)

## stencil

æ§˜ã€…ãªé¸æŠæ–¹æ³•ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æä¾›ã—ãŸã‚Šã€åˆ†ã‹ã‚Šã‚„ã™ãè‰²ä»˜ã‘ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-12-12 16.52.45 1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/f3f1f36d-4d83-ee76-246d-54d5842827bf.png)
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-12-12 16.54.16.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/8410fbca-5329-8b7b-70b7-07d86f1a4324.png)


# Node.jsã§ã®CLIã®ä½œã‚Šæ–¹

ãã‚Œã§ã¯ã€Node.jsã§CLIã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚

ä¸€èˆ¬çš„ã«CLIã®é–‹ç™ºã§ã¯ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„ã¾ã™ãŒã€ä»Šå›ã¯æ±ç”¨çš„ãªçŸ¥è­˜ã¨ã—ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã‚ãšã«æ¨™æº–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã ã‘ã§é–‹ç™ºã—ã¾ã™ã€‚

ã“ã“ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå¼•æ•°ã‚’1ã¤å—ã‘å–ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’å—ã‘å–ã‚‹CLIã‚’ä½œã‚Šã¾ã™ã€‚
<img width="639" alt="ä½œã‚‹ã‚‚ã®ã®ã‚¤ãƒ¡ãƒ¼ã‚¸" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/b30ca8cf-32ac-d885-ae60-2a73b5f401c7.png">

## å¼•æ•°ã®å—ã‘å–ã‚Š

Node.jsã§`process.argv`ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’å«ã‚€é…åˆ—ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®é…åˆ—ã®3ã¤ç›®ã‹ã‚‰ã®è¦ç´ ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

[Node.js Documentation | process.argv](https://nodejs.org/docs/latest/api/process.html#process_process_argv)

```js
// lib/index.js
console.log(process.argv[2]);
console.log(process.argv[3]);
```

```console
$ node lib/index.js foo bar
foo
bar
```

ã“ã“ã‹ã‚‰å®Ÿéš›ã«ä½œæˆã™ã‚‹CLIã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚

1ã¤ã®å¼•æ•°ã‚’å¿…ãšå—ã‘å–ã‚‹ã‚ˆã†ã«ãƒã‚§ãƒƒã‚¯ã—ã¤ã¤ã€å—ã‘å–ã£ãŸå€¤ã‚’ä½¿ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

`lib/index.js`

```js

const [, , firstArg] = process.argv;

if (!firstArg) {
  console.error("Please pass one argument!!");
  process.exit(1);
}

const msg = `
  Hello!! ${firstArg} san.
  I am Toshihisa Tomatsu.
  GitHub: https://github.com/toshi-toma
  Twitter: https://twitter.com/toshi__toma
`;

console.log(msg);
```

```console
$ node lib/cli.js tom

  Hello!! tom san.
  I am Toshihisa Tomatsu.
  GitHub: https://github.com/toshi-toma
  Twitter: https://twitter.com/toshi__toma
```

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’å—ã‘å–ã‚‹

æ¬¡ã¯CLIã§ã‚ˆãã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯çµ„ã¿è¾¼ã¿ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«`readline`ã‚’ä½¿ã„ã¾ã™ã€‚

[Node.js Documentation | Readline](https://nodejs.org/api/readline.html)

ã¾ãŸã€`readline`ã®`question`é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®å—ã‘å–ã‚Šã¾ã§ã‚’è¡Œã†ã“ã¨ãŒã§ãä¾¿åˆ©ã§ã™ã€‚

`lib/index.js`

```js

// ...
const readline = require("readline");

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

rl.question("Please enter names for your project: ", answer => {
  console.log(`Thank you!! Let's start ${answer}`);

  rl.close();
});
```

```console
node bin/cli.js tom

    Hello!! tom san.
    I am Toshihisa Tomatsu.
    GitHub: https://github.com/toshi-toma
    Twitter: https://twitter.com/toshi__toma

Please enter names for your project: 
```

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’å—ã‘å–ã‚Šã€ãã‚Œã‚’ä½¿ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºã¾ã§è¡Œãˆã¾ã—ãŸã€‚

## å‹•ä½œç¢ºèª

CLIã®ä½œæˆã¯è¡Œãˆã¾ã—ãŸãŒã€å®Ÿéš›ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ã™ã‚‹å ´åˆã€`eslint file1.js file2.js`ã ã£ãŸã‚Š`npm init`ã¨ã„ã£ãŸå½¢å¼ã§åˆ©ç”¨ã—ã¾ã™ã€‚

ã“ã“ã§ã¯å®Ÿéš›ã®CLIã®ã‚ˆã†ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

### npm init

ã¾ãšã¯`package.json`ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€npmã®`init`ã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆã—ã¾ã™ã€‚

```console
$ npm init -y
```

### package.json bin

`package.json`ã®`bin`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã€ã‚³ãƒãƒ³ãƒ‰ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¡Œãˆã¾ã™ã€‚

ã“ã†ã—ã¦ãŠãã“ã¨ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«global installã‚„local installã§é©åˆ‡ãªå ´æ‰€ã«ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ã¾ã™ã€‚

ä»Šå›ã¯ã€`bin/cli.js`ã‚’ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œç”¨ã«ç”¨æ„ã—ã¾ã™ã€‚

```json
{
  // ...
  "bin": {
    "cli": "bin/cli.js"
  },
  // ...
}

```

### bin/cli.js

ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã«`#!/usr/bin/env node`ã‚’ã¤ã‘ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã€‚

`bin/cli.js`

```js
#!/usr/bin/env node

require("../lib/index")();
```

å…ˆç¨‹ä½œæˆã—ãŸ`lib/index.js`ã‚’å¤–éƒ¨ã‹ã‚‰åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«moduleåŒ–ã—ã¦ãŠãã¾ã™ã€‚


`lib/index.js`

```js
const readline = require("readline");

module.exports = () => {
  const [, , firstArg] = process.argv;

  if (!firstArg) {
    console.error("Please pass one argument!!");
    process.exit(1);
  }

  const msg = `
    Hello!! ${firstArg} san.
    I am Toshihisa Tomatsu.
    GitHub: https://github.com/toshi-toma
    Twitter: https://twitter.com/toshi__toma
  `;

  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
  });

  console.log(msg);

  rl.question("Please enter names for your project: ", answer => {
    console.log(`Thank you!! Let's start ${answer}`);

    rl.close();
  });
};
```

### npm link

ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨æ„ã§ããŸã®ã§æ‰‹å…ƒã§è©¦ã—ã¦ã¿ã¾ã™ã€‚
ã“ã“ã§ã¯`npm link`ã‚’ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ã€‚

```console
$ npm link
audited 1 package in 0.951s
found 0 vulnerabilities

/usr/local/bin/cli -> /usr/local/lib/node_modules/@toshi-toma/cli/bin/cli.js
/usr/local/lib/node_modules/@toshi-toma/cli -> /Users/toshi-toma/dev/github.com/toshi-toma/cli
```

ã“ã†ã™ã‚‹ã“ã¨ã§å…ˆç¨‹ç”¨æ„ã—ãŸ`cli`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```console
$ cli
Please pass one argument!!
```

## npm publish

æœ€å¾Œã«ã€èª°ã§ã‚‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«npmã«publishã—ã¾ã™ã€‚

ä»Šå›ã¯è‡ªåˆ†ç”¨ã«ä½œã£ãŸã ã‘ãªã®ã§ã€`scoped package`ã¨ã—ã¦å…¬é–‹ã—ã¾ã™ã€‚

ã¾ãšã€npmã«ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãªã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã‚‚ã—ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒã£ã¦ãªã„äººã¯ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

[Creating a new user account on the public registry](https://docs.npmjs.com/creating-a-new-npm-user-account)

```console
$ npm whoami
toshi-toma
```

ã‚ã¨ã¯`package.json`ã®`name`ã¨`publishConfig`ã‚’æŒ‡å®šã—ã¾ã™ã€‚

`name`ã¯`@<ãƒ¦ãƒ¼ã‚¶ãƒ¼å>/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å`ã¨ã—ã¾ã™ã€‚

```json
{
  "name": "@toshi-toma/cli",
  "publishConfig": {
    "access": "public"
  },
  // ...
}
```

æœ€å¾Œã«`npm publish`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚Œã°ã€`@<ãƒ¦ãƒ¼ã‚¶ãƒ¼å>/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å`ã¨ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¾ã™ã€‚

```console
npx @toshi-toma/cli tom

    Hello!! tom san.
    I am Toshihisa Tomatsu.
    GitHub: https://github.com/toshi-toma
    Twitter: https://twitter.com/toshi__toma

Please enter names for your project:
```

# ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª

Node.jsã§CLIã‚’ä½œã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸãŒã€ç‰¹ã«ä½•ã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã‚ãšã«æ¨™æº–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã ã‘ã§ä½œæˆã—ã¾ã—ãŸã€‚`process.argv`ã‚„`readline`ã ã¨å®Ÿè£…ãŒè¤‡é›‘ã«ãªã£ãŸã‚Šé¢å€’ã§ã™ã€‚
ã¾ãŸå®Ÿéš›ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®ãƒ‘ãƒ¼ã‚¹ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€helpã®ä½œæˆãªã©è¤‡é›‘ãªå‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ãã‚Œã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã®ãŒä¸€èˆ¬çš„ãªã‚ˆã†ã§ã™ã€‚

ã“ã“ã‹ã‚‰ã¯ã€CLIä½œæˆã«ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆã‚„å¼•æ•°ã®ãƒ‘ãƒ¼ã‚¹
### yargs
https://github.com/yargs/yargs

yargsã¯ã‚³ãƒãƒ³ãƒ‰ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä½œæˆåŠã³å¼•æ•°ã®ãƒ‘ãƒ¼ã‚¹ã€helpã®è‡ªå‹•ä½œæˆãªã©CLIä½œæˆã‚’ä¾¿åˆ©ã«è¡Œãˆã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

```js
require("yargs")
  .scriptName("console")
  .usage("$0 <cmd> [args]")
  .command(
    "hello [name]",
    "console your name!",
    yargs => {
      yargs.positional("name", {
        type: "string",
        default: "Toshihisa",
        describe: "the name to say hello to"
      });
    },
    function(argv) {
      console.log("hello", argv.name, "welcome to yargs!");
    }
  )
  .help().argv;

```

```console
$ node lib/yargs.js --help
console <cmd> [args]

ã‚³ãƒãƒ³ãƒ‰:
  console hello [name]  console your name!

ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
  --version  ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤º                                [çœŸå½]
  --help     ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º                                    [çœŸå½]
```

### minimist
https://github.com/substack/minimist

minimistã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®ãƒ‘ãƒ¼ã‚¹ã‚’è¡Œã£ã¦ãã‚Œã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

```js
const argv = require("minimist")(process.argv.slice(2));
console.log(argv);
```

```console
$ node lib/minimist.js src -a bar --watch
{ _: [ 'src' ], a: 'bar', watch: true }
```

### cac
https://github.com/cacjs/cac

cacã¯CLIä½œæˆã«å¿…è¦ãªæ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚ŒãŸã‚·ãƒ³ãƒ—ãƒ«ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚optionã€versionã€helpã€parseã¨ã„ã£ãŸ4ã¤ã®APIã«ã¤ã„ã¦çŸ¥ã‚‹ã ã‘ã§ä½¿ãˆã‚‹ã®ã§éå¸¸ã«ç°¡å˜ã§ã™ã€‚

```js
const cli = require("cac")();

cli.option("--type [type]", "Choose a project type", {
  default: "node"
});
cli.option("--name <name>", "Provide your name");

cli.command("lint [...files]", "Lint files").action((files, options) => {
  console.log(files, options);
});
cli.help();
cli.version("0.0.0");
cli.parse();
```

```console
$ node lib/cac.js --help
cac.js v0.0.0

Usage:
  $ cac.js <command> [options]

Commands:
  lint [...files]  Lint files

For more info, run any command with the `--help` flag:
  $ cac.js lint --help

Options:
  --type [type]  Choose a project type (default: node)
  --name <name>  Provide your name
  -h, --help     Display this message
  -v, --version  Display version number
```

### commander
https://github.com/tj/commander.js

commanderã¯ã¨ã¦ã‚‚æœ‰åã§ä½¿ã‚ã‚Œã¦ã„ã‚‹CLIä½œæˆã«å¿…è¦ãªAPIãŒç”¨æ„ã•ã‚ŒãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

```js
const program = require("commander");

program
  .command("clone <source> [destination]")
  .description("clone a repository into a newly created directory")
  .action((source, destination) => {
    console.log("clone command called");
  });

program
  .version("0.1.0")
  .command("install [name]", "install one or more packages")
  .command("list", "list packages installed", { isDefault: true })
  .parse(process.argv);
```

### meow
https://github.com/sindresorhus/meow

meowã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ã£ãŸã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã«CLIã‚’ä½œæˆã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

```js
const meow = require("meow");
const foo = require(".");

const cli = meow(
  `
	Usage
	  $ foo <input>

	Options
	  --rainbow, -r  Include a rainbow

	Examples
	  $ foo unicorns --rainbow
	  ğŸŒˆ unicorns ğŸŒˆ
`,
  {
    flags: {
      rainbow: {
        type: "boolean",
        alias: "r"
      }
    }
  }
);

console.log(cli);

foo(cli.input[0], cli.flags);
```

## è‰²ä»˜ã‘

### chalk
https://github.com/chalk/chalk

chalkã¯ä»¥ä¸‹ã®ã‚ˆã†ã«`chalk.red("æ–‡å­—åˆ—")`ã¨ã™ã‚‹ã ã‘ã§è‰²ä»˜ã‘ãŒè¡Œãˆã¾ã™ã€‚
ã¾ãŸã€`chalk.blue.bgRed.bold("Hello world!")`ã®ã‚ˆã†ã«å¿…è¦ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒã‚§ãƒ¼ãƒ³ã§ãã‚‹ã®ã‚‚ç›´æ„Ÿçš„ã§ç°¡å˜ã§ã™ã€‚

ä¼¼ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«[kleur](https://github.com/terkelg/prompts)ãŒã‚ã‚Šã¾ã™ã€‚

```js
const chalk = require("chalk");

console.log(chalk.blue("Hello") + " World" + chalk.red("!"));
console.log(chalk.blue.bgRed.bold("Hello world!"));
console.log(chalk.blue("Hello", "World!", "Foo", "bar", "biz", "baz"));
console.log(chalk.red("Hello", chalk.underline.bgBlue("world") + "!"));
```

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2019-12-14 21.40.08.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107472/480c8ab6-61e5-d82d-de54-6535eb6435b0.png)


## UI


### ora

https://github.com/sindresorhus/ora

oraã‚’ä½¿ãˆã°ã€ç¶ºéº—ãªã‚¹ãƒ”ãƒŠãƒ¼ãŒç°¡å˜ã«è¡¨ç¤ºã§ãã¾ã™ã€‚

```js
const ora = require("ora");

const spinner = ora("Loading unicorns").start();

setTimeout(() => {
  spinner.color = "yellow";
  spinner.text = "Loading rainbows";
}, 1000);
```


### clui
https://github.com/nathanpeck/clui

cluiã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®UIãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã€ã‚²ãƒ¼ã‚¸ã‚„ã‚¹ãƒ”ãƒŠãƒ¼ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ãªã©ã‚’ç°¡å˜ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
const Spinner = require("clui").Spinner;

let countdown = new Spinner("Exiting in 5 seconds...  ", [
  "â£¾",
  "â£½",
  "â£»",
  "â¢¿",
  "â¡¿",
  "â£Ÿ",
  "â£¯",
  "â£·"
]);

countdown.start();

let number = 5;
setInterval(function() {
  number--;
  countdown.message("Exiting in " + number + " seconds...  ");
  if (number === 0) {
    process.stdout.write("\n");
    process.exit(0);
  }
}, 1000);

```

### figlet
https://github.com/patorjk/figlet.js

figletã¯ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã‚¢ã‚¹ã‚­ãƒ¼ã‚¢ãƒ¼ãƒˆã‚’ä½œæˆã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

```js
const figlet = require("figlet");

figlet("Hello World!!", function(err, data) {
  console.log(data);
});
```

```console
$ node lib/figlet.js
  _   _      _ _        __        __         _     _ _ _
 | | | | ___| | | ___   \ \      / /__  _ __| | __| | | |
 | |_| |/ _ \ | |/ _ \   \ \ /\ / / _ \| '__| |/ _` | | |
 |  _  |  __/ | | (_) |   \ V  V / (_) | |  | | (_| |_|_|
 |_| |_|\___|_|_|\___/     \_/\_/ \___/|_|  |_|\__,_(_|_)
```

### update-notifier
https://github.com/yeoman/update-notifier

update-notifierã‚’ä½¿ãˆã°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæƒ…å ±ã®ãƒœãƒƒã‚¯ã‚¹ã‚’ç°¡å˜ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### terminal-image
https://github.com/sindresorhus/terminal-image

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### terminal-link
https://github.com/sindresorhus/terminal-link

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### log-symbols
https://github.com/sindresorhus/log-symbols

ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’è¡¨ç¾ã™ã‚‹æ™‚ã«ä¾¿åˆ©ã§ã™ã€‚infoã€successã€warningã€errorãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ãã®ä»–


### ink
https://github.com/vadimdemedes/ink

inkã¯`React`ã§CLIã‚’ä½œæˆã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚`Gatsby`ã‚„`Parcel`ã§ã‚‚åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

```js
import React from "react";
import { render, Box } from "ink";

const Demo = () => <Box>Hello World</Box>;

render(<Demo />);
```

### shelljs
https://github.com/shelljs/shelljs

shelljsã¯ãã®åã®é€šã‚Šã€Node.jsã‹ã‚‰ç°¡å˜ã«Unixã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚Windows/Mac/Linuxã§ãƒãƒ¼ã‚¿ãƒ–ãƒ«ã«å‹•ä½œã™ã‚‹ã®ã‚‚ä¾¿åˆ©ã§ã™ã€‚

```js
const shell = require("shelljs");

console.log(shell.which("git"));
console.log(shell.cat("package.json"));
shell.cp("package.json", "package-copy.json");
shell.ls("lib/**/*.js").forEach(function(file) {
  console.log(file);
});
```

### clear
https://github.com/bahamas10/node-clear

clearã‚’ä½¿ãˆã°ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ç”»é¢ã‚’ä¸€æ—¦ã¾ã£ã•ã‚‰ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
const clear = require("clear");
clear();

console.log("Hello clear");
```


### inquirer

https://github.com/SBoudrias/Inquirer.js/

inquirerã¯ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªCLIã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’ä½œæˆã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚å›ç­”ã®æ–¹æ³•ã¯å…¥åŠ›ã€ãƒªã‚¹ãƒˆã‚„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å½¢å¼ãªã©ã€æ§˜ã€…ãªæ–¹æ³•ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

ä¼¼ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§[Enquirer](https://github.com/enquirer/enquirer)ã‚„[prompts](https://github.com/terkelg/prompts)ãŒã‚ã‚Šã¾ã™ã€‚

```js
const inquirer = require("inquirer");

inquirer
  .prompt([
    {
      name: "name",
      message: "What's your name?",
      default: "toshi-toma"
    },
    {
      type: "list",
      name: "job",
      message: "What is your occupation?",
      choices: ["Frontend", "Backend", "Infra"]
    },
    {
      type: "checkbox",
      name: "country",
      message: "Where are you from?",
      choices: ["Japna", "US", "China", "Others"]
    }
  ])
  .then(({ name, job, country }) => {
    console.log(name);
    console.log(job);
    console.log(country);
  });
```

### listr
https://github.com/SamVerschueren/listr

listrã¯ä»»æ„ã®ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚„é€²æ—ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã‚¿ã‚¹ã‚¯ã‚’`Listr`ã®é…åˆ—ã«æ¸¡ã™ã ã‘ã§ã™ã€‚

```js
const Listr = require("listr");
const tasks = new Listr([
  {
    title: "Task 1",
    task: () => Promise.resolve("Foo")
  },
  {
    title: "Can be skipped",
    skip: () => {
      if (Math.random() > 0.5) {
        return "Reason for skipping";
      }
    },
    task: () => "Bar"
  },
  {
    title: "Task 3",
    task: () => Promise.resolve("Bar")
  }
]);

tasks.run().catch(err => {
  console.error(err);
});
```

```console
$ node lib/listr.js
  âœ” Task 1
  â†“ Can be skipped [skipped]
    â†’ Reason for skipping
  âœ” Task 3

```

### oclifã€gluegun

https://github.com/oclif/oclif
https://github.com/infinitered/gluegun

CLIã‚’ä½œæˆã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚


# ã¾ã¨ã‚

Node.jsã§ã‚·ãƒ³ãƒ—ãƒ«ãªCLIã®ä½œæˆæ–¹æ³•ã‹ã‚‰ã€CLIä½œæˆã‚’ç°¡å˜ã«è¡Œãˆã‚‹ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚

è‡ªåˆ†ã§ã‚‚èª¿ã¹ã¦ã¿ã¦ã€ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ä¼¼ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã¨ã¦ã‚‚å¤šãã€å®Ÿéš›ã©ã‚Œã‚’ä½¿ãˆã°ã„ã„ã®ã‹åˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ã ã„ãŸã„ã§ãã‚‹ã“ã¨ã¯åŒã˜ãªã®ã§ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã€å¥½ã¿ã§ä½¿ã£ã¦ã¿ã‚‹ã®ãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚

ãã—ã¦ã€å®‰å®šã®[sindresorhus](https://github.com/sindresorhus)ãŒã¨ã¦ã‚‚ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãŸãã•ã‚“ä½œæˆã—ã¦ãã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚
